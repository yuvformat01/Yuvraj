<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yuvraj Morse System</title>

<style>
body{
  background:black;
  color:#00ff00;
  font-family:monospace;
  padding:15px;
}
#terminal{
  white-space:pre-wrap;
  margin-bottom:12px;
}
input{
  background:black;
  color:#00ff00;
  border:none;
  outline:none;
  font-size:16px;
  width:100%;
  padding:10px 0;
}
.block{
  margin:18px 0;
  padding:8px;
  border-left:3px solid #00ff00;
}
.small{opacity:.7}
</style>
</head>
<body>

<div id="terminal"></div>
<input id="input" placeholder="Type here...">

<script>
const morse={
A:'.-',B:'-...',C:'-.-.',D:'-..',E:'.',
F:'..-.',G:'--.',H:'....',I:'..',J:'.---',
K:'-.-',L:'.-..',M:'--',N:'-.',O:'---',
P:'.--.',Q:'--.-',R:'.-.',S:'...',T:'-',
U:'..-',V:'...-',W:'.--',X:'-..-',Y:'-.--',
Z:'--..',
0:'-----',1:'.----',2:'..---',3:'...--',
4:'....-',5:'.....',6:'-....',7:'--...',
8:'---..',9:'----.',
' ':'/'
};

const reverseDict=Object.fromEntries(Object.entries(morse).map(([k,v])=>[v,k]));

let count=0;
let history=[];
let loginStage=0;
let attempts=0;
let user="";

const term=document.getElementById("terminal");
const input=document.getElementById("input");

function print(t){ term.innerHTML+=t+"<br>"; }

function boot(){
print("Booting Secure Morse System...");
setTimeout(()=>print("Loading modules..."),400);
setTimeout(()=>print("System ready"),900);
setTimeout(()=>{
print("<br>Username:");
loginStage=1;
},1300);
}

boot();

input.addEventListener("input",function(){
if(loginStage!==3) return;

let val=input.value.trim();
if(!val) return;

let isMorse=/^[.\-\/\s]+$/.test(val);
let preview="";

if(isMorse){
let parts=val.split(" ");
parts.forEach(p=>preview+=reverseDict[p]||'?');
}else{
for(let i=0;i<val.length;i++){
preview+=(morse[val[i].toUpperCase()]||'?')+" ";
}
}

document.getElementById("preview")?.remove();
let d=document.createElement("div");
d.id="preview";
d.className="small";
d.innerText=preview;
term.appendChild(d);
});

input.addEventListener("keydown",function(e){
if(e.key!=="Enter") return;

let val=input.value.trim();
input.value="";

if(loginStage===1){
user=val;
print(val);
print("Password:");
loginStage=2;
return;
}

if(loginStage===2){
print("Checking credentials...");
setTimeout(()=>{
if(user==="yuvraj" && val==="123"){
print("Access Granted<br>");
loginStage=3;
}else{
attempts++;
print("Access Denied");
if(attempts>=3){
print("System Locked");
input.disabled=true;
}else{
print("Username:");
loginStage=1;
}
}
},700);
return;
}

if(loginStage!==3) return;

/* Commands */
if(val==="help"){
print("Commands: history, stats, reset, clear, time, date");
return;
}
if(val==="clear"){ term.innerHTML=""; return; }
if(val==="reset"){ history=[]; count=0; print("Reset done"); return; }
if(val==="stats"){ print("Total: "+count); return; }
if(val==="time"){ print(new Date().toLocaleTimeString()); return; }
if(val==="date"){ print(new Date().toDateString()); return; }
if(val==="history"){ history.forEach(h=>print(h)); return; }

/* Conversion */
count++;
let isMorse=/^[.\-\/\s]+$/.test(val);
let block="<div class='block'><b>"+count+". "+val+"</b><br>";

if(isMorse){
let parts=val.split(" ");
let out="";
parts.forEach(p=>out+=reverseDict[p]||'?');
block+="<span class='small'>"+out+"</span>";
}else{
let res="";
for(let i=0;i<val.length;i++){
res+=(morse[val[i].toUpperCase()]||'?')+" ";
}
block+="<span class='small'>"+res+"</span>";
}

block+="</div>";
history.push(block);
print(block);
});
</script>
</body>
</html>